---
import Section from "../../layouts/Section.astro";
import { Image } from "astro:assets";
import season1Logo from "./assets/latland_logo_t1.webp"
import season2Logo from "./assets/latland_logo_t2.webp"

import LoreOverlayT1 from "./LoreOverlayT1.astro";
import LoreOverlayT2 from "./LoreOverlayT2.astro"
---

<style>

#overlay-t1, .season-1 {
    background-image: url("./assets/bg_t1.webp");
}

</style>

<Section hook="lore" background="lore" extraClasses="flex">
    <div class="flex-1">
    <div class="flex flex-col items-center justify-center text-center h-2/12">
        <h2 class="text-4xl lg:text-7xl font-display">La Historia de LatLand</h2>
        <p class="text-lg lg:text-3xl font-body">Seg√∫n los Anales del Reino de Baren</p>
    </div>
    <div class="relative h-10/12 overflow-hidden">
        <div id="lore-cards" class="grid grid-cols-1 md:grid-cols-2 h-full">
            <button data-lore="t1" 
            class="season-1 bg-cover bg-center hover:scale-105 group bg-stone-800 hover:bg-stone-700 
            hover:cursor-pointer transition duration-200 ease-in-out">
                <Image src={season1Logo} alt="Temporada 1: Las Profundidades de Virland"
                class={"inline transition-transform duration-300 ease-in-out group-hover:scale-110"}/>
            </button>
            <button data-lore="t2" 
            class="season-2 bg-cover bg-center hover:scale-105 group bg-stone-800 hover:bg-stone-700
            hover:cursor-pointer transition duration-200 ease-in-out">
                <Image src={season2Logo} alt="Temporada 2: Exploradores del Reino Perdido" 
                class={"inline transition-transform duration-300 ease-in-out group-hover:scale-110"} />
            </button>
        </div>
        <div id="overlay-t1" 
        class="absolute inset-0 z-20 -translate-x-full pointer-events-none
        transition-all duration-500 ease-in-out bg-cover">
            <LoreOverlayT1/>
        </div>
        <div id="overlay-t2" 
        class="absolute inset-0 z-20 bg-stone-800 translate-x-full pointer-events-none
        transition-all duration-500 ease-in-out">
            <LoreOverlayT2/>
        </div>
    </div>
    </div>
</Section>

<script type="module">

    document.addEventListener('DOMContentLoaded', () => { 
        
        const buttons = document.querySelectorAll('[data-lore]')

        buttons.forEach(btn => {
            btn.addEventListener('click', () =>{
                openLore(btn.dataset.lore)
            })
        })

        function openLore(season) {
            const overlay = document.getElementById(`overlay-${season}`)
            if (!overlay) return
            if (season === 't1') {
                overlay.classList.remove('-translate-x-full','pointer-events-none')
                overlay.classList.add('translate-x-0','pointer-events-auto')
            }
            if (season === 't2') {
                overlay.classList.remove('translate-x-full','pointer-events-none')
                overlay.classList.add('translate-x-0','pointer-events-auto')
            }
        }
    })
</script>